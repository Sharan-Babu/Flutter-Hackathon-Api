import numpy as np
import pandas as pd
from flask import Flask, jsonify, request


app = Flask(__name__)

# Define routes
@app.route('/', methods=['POST'])
def predict():                       # {'days':21}

	data = request.get_json(force=True)
	# convert input data into dataframe
	data.update((x, [y]) for x,y in data.items())
	number_of_days = int(data["days"][0])

	if number_of_days>100:
		number_of_days=101
    	
	total_recovered=[ 115650.83715298,  121273.75237604,  130042.82355576,
        142404.41005572,  148918.13103764,  160016.5131186 ,
        172031.34501071,  192356.2407249 ,  208940.72002441,
        223150.1856736 ,  240952.16664301,  252906.28209439,
        274958.77883159,  297927.72537993,  323766.34128089,
        345864.54076718,  365587.72660314,  392915.0731701 ,
        414394.55421901,  440458.69636696,  467439.28832606,
        497289.54963778,  525517.29760591,  551370.03192369,
        580815.28156172,  604412.66568171,  632594.71090074,
        665005.70481671,  700286.36808532,  731826.61493925,
        760991.84814284,  797767.72730257,  828695.74094426,
        864208.415685  ,  900637.54023687,  939936.33414137,
        979094.83504729, 1015878.32230286, 1056254.32487868,
       1090782.46193644, 1129895.26009326, 1170910.09307458,
       1214794.59540851, 1254938.68132777, 1292707.75359671,
       1334069.34118587, 1374221.27737212, 1418957.87465742,
       1464610.92175386, 1513133.63820292, 1557915.93823731,
       1603172.30468355, 1652021.18645002, 1695022.20269844,
       1742607.88004591, 1791110.00720453, 1842481.80504112,
       1890113.18646305, 1935369.55423464, 1984218.43732646,
       2027219.45490025, 2109822.38462223, 2193341.76415536,
       2279730.81304111, 2362379.44551219, 2442653.06433294,
       2526519.19847392, 2604537.46709687, 2687140.39681885,
       2770659.77635199, 2857048.82523774, 2939697.45770882,
       3019971.07652956, 3103837.21067055, 3181855.47929349,
       3264458.40901547, 3347977.7885486 , 3434366.83743435,
       3517015.46990543, 3597289.08872618, 3681155.22286716,
       3759173.49149012, 3841776.42121209, 3925295.80074521,
       4011684.84963098, 4094333.48210206, 4174607.1009228 ,
       4258473.23506379, 4336491.50368674, 4419094.43340872,
       4502613.81294185, 4589002.86182761, 4671651.49429868,
       4751925.11311942, 4835791.24726041, 4913809.51588335,
       4996412.44560534, 5079931.82513846, 5166320.87402422,
       5248969.5064953 ]

	world_cases = [ 9533559.17742482,  9664724.96646699,  9791049.6631297 ,
        9912411.9905202 , 10039121.15463953, 10171457.32629209,
       10306329.47924063, 10431883.45850663, 10563049.2475488 ,
       10689373.9442115 , 10810736.27160203, 10937445.43572134,
       11069781.60737391, 11204653.76032244, 11330207.73958844,
       11461373.52863061, 11587698.22529332, 11709060.55268383,
       11835769.71680315, 11968105.88845572, 12102978.04140425,
       12228532.02067025, 12359697.80971242, 12486022.50637512,
       12607384.83376565, 12734093.99788497, 12866430.16953751,
       13001302.32248606, 13126856.30175206, 13258022.09079423,
       13384346.78745693, 13505709.11484744, 13632418.27896676,
       13764754.45061931, 13899626.60356788, 14025180.58283387,
       14156346.37187604, 14282671.06853875, 14404033.39592925,
       14530742.56004858, 14663078.73170114, 14797950.88464968,
       14923504.86391568, 15054670.65295786, 15180995.34962056,
       15302357.67701106, 15429066.84113039, 15561403.01278295,
       15696275.16573149, 15821829.14499749, 15952994.93403966,
       16079319.63070236, 16200681.95809286, 16327391.1222122 ,
       16459727.29386477, 16594599.44681331, 16720153.4260793 ,
       16851319.21512147, 16977643.91178417, 17099006.23917469,
       17225715.403294  , 17358051.57494658, 17492923.72789511,
       17618477.70716111, 17749643.49620328, 17875968.19286598,
       17997330.5202565 , 18124039.68437582, 18256375.8560284 ,
       18391248.00897693, 18516801.98824292, 18647967.77728508,
       18774292.47394779, 18895654.80133832, 19022363.96545763,
       19154700.13711018, 19289572.29005873, 19415126.26932473,
       19546292.05836689, 19672616.75502959, 19793979.08242013,
       19920688.24653943, 20053024.418192  , 20187896.57114055,
       20313450.55040654, 20444616.33944871, 20570941.03611143,
       20692303.36350194, 20819012.52762125, 20951348.69927381,
       21086220.85222235, 21211774.83148835, 21342940.62053053,
       21469265.31719323, 21590627.64458375, 21717336.80870306,
       21849672.98035563, 21984545.13330416, 22110099.11257016,
       22241264.90161233]
	
	total_deaths = [ 21686.11154214,  24416.52534419,  28653.3336603 ,  32613.54208588,
        35925.50505832,  39327.54054758,  43802.94823708,  50115.78089862,
        56354.31734708,  62343.99409022,  68057.07094283,  73121.90234231,
        79226.71238963,  86404.89463719,  93667.63342976, 100856.07600925,
       107795.65888343, 114458.69808141, 120473.49182625, 126578.35808791,
       133756.59654981, 141019.39155672, 148207.89048562, 155147.52970921,
       161810.56904227, 167825.36292219, 173930.22931892, 180534.05754081,
       187222.44230771, 193836.53086153, 200201.75971003, 205730.35246486,
       210610.69976656, 215581.11958507, 221624.91160382, 227753.26016759,
       233324.51880889, 238646.91774488, 243692.71679033, 248090.27038265,
       252577.89649178, 258066.85410651, 263640.36826625, 269139.5862129 ,
       274389.94445425, 279363.70280505, 283366.48141894, 287459.33254965,
       292625.55588061, 297876.33575657, 303052.81941945, 307586.52603285,
       311843.63275571, 315452.49402544, 319151.42781199, 323923.73379878,
       328028.68484328, 332059.3396747 , 335841.13480081, 339346.33003638,
       342203.27981882, 345997.56753744, 350865.22745631, 355817.44392018,
       360695.36417097, 365324.42471645, 369676.88537139, 373381.1005732 ,
       377175.38829182, 382043.04821068, 386995.26467456, 391873.18492535,
       396502.24547082, 400854.70612576, 404558.92132757, 408353.20904619,
       413220.86896506, 418173.08542893, 423051.00567972, 427680.0662252 ,
       432032.52688014, 435736.74208195, 439531.02980057, 444398.68971943,
       449350.90618331, 454228.8264341 , 458857.88697957, 463210.34763452,
       466914.56283632, 470708.85055494, 475576.51047381, 480528.72693768,
       485406.64718847, 490035.70773395, 494388.16838889, 498092.3835907 ,
       501886.67130932, 506754.33122818, 511706.54769206, 516584.46794285]

    

    


    
    
	
    
    
	# send result back to browser
	output = {'total_cases': world_cases[:number_of_days],'total_deaths': total_deaths[:number_of_days],'total_recovered': total_recovered[:number_of_days]}

	# return data
	return jsonify(results=output)

if __name__ == '__main__':
    app.run(debug=True)